<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ö–æ—Ä–∑–∏–Ω–∞ - –ê–ø—Ç–µ–∫–∞</title>
    <link rel="stylesheet" href="{{ url_for('bp_basket.static', filename='css/basket.css') }}">
</head>
<body>
    <div class="container">
        <h1>üõí –ê–ø—Ç–µ–∫–∞ - –í—ã–±–æ—Ä —Ç–æ–≤–∞—Ä–æ–≤</h1>
        
        <div class="basket-layout">
            <!-- –õ–µ–≤–∞—è —á–∞—Å—Ç—å - –¢–æ–≤–∞—Ä—ã -->
            <div class="products-section">
                <h2>üì¶ –î–æ—Å—Ç—É–ø–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã</h2>
                <div class="products-scroll-container">
                    <div class="products-grid">
                        {% for product in products %}
                            {% include 'product_card.html' %}
                        {% endfor %}
                    </div>
                </div>
            </div>
            
            <!-- –ü—Ä–∞–≤–∞—è —á–∞—Å—Ç—å - –ö–æ—Ä–∑–∏–Ω–∞ -->
            <div class="basket-section">
                <div class="basket-sidebar">
                    <h2>üõçÔ∏è –í–∞—à–∞ –∫–æ—Ä–∑–∏–Ω–∞</h2>
                    
                    <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–æ—Ä–∑–∏–Ω—ã -->
                    <div class="basket-stats">
                        <div class="basket-stat">
                            <span class="stat-icon">üì¶</span>
                            <span class="stat-text">–ü–æ–∑–∏—Ü–∏–π: <strong>{{ basket_items|length }}</strong></span>
                        </div>
                        <div class="basket-stat">
                            <span class="stat-icon">üõí</span>
                            <span class="stat-text">–¢–æ–≤–∞—Ä–æ–≤: <strong>{{ basket_items.values()|sum(attribute='quantity') }}</strong></span>
                        </div>
                    </div>
                    
                    <!-- –¢–æ–≤–∞—Ä—ã –≤ –∫–æ—Ä–∑–∏–Ω–µ —Å —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –≤—ã—Å–æ—Ç–æ–π -->
                    <div class="basket-scroll-container">
                        <div class="basket-items-grid">
                            {% if basket_items %}
                                {% for item in basket_items %}
                                    {% include 'basket_item_card.html' %}
                                {% endfor %}
                            {% else %}
                                <div class="empty-basket">
                                    <p>–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞</p>
                                    <span>üõí</span>
                                    <p class="empty-hint">–î–æ–±–∞–≤—å—Ç–µ —Ç–æ–≤–∞—Ä—ã –∏–∑ –∫–∞—Ç–∞–ª–æ–≥–∞</p>
                                </div>
                            {% endif %}
                        </div>
                    </div>
                    
                    <!-- –°–≤–æ–¥–∫–∞ –∏ –¥–µ–π—Å—Ç–≤–∏—è -->
                    <div class="basket-summary">
                        <div class="summary-stats">
                            <div class="stat-item total">
                                <span class="stat-label">üíµ –û–±—â–∞—è —Å—É–º–º–∞:</span>
                                <span class="stat-value">
                                    {{ total }} ‚ÇΩ
                                </span>
                            </div>
                        </div>
                        
                        {% if basket_items %}
                        <form method="POST" action="{{ url_for('bp_basket.basket_order_handler') }}">
                            <button type="submit" class="btn-checkout">
                                üí≥ –û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑
                            </button>
                        </form>
                        <form method="POST" action="{{ url_for('bp_basket.basket_clear_handler') }}">
                            <button type="submit" class="btn-clear">
                                üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å –∫–æ—Ä–∑–∏–Ω—É
                            </button>
                        </form>
                        {% else %}
                        <button class="btn-checkout" disabled>üí≥ –û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑</button>
                        <button class="btn-clear" disabled>üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å –∫–æ—Ä–∑–∏–Ω—É</button>
                        {% endif %}
                        <a href="{{ url_for('main_menu_handler') }}" class="btn-main">
                            üè† –í –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>